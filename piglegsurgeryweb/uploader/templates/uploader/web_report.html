{% extends 'base.html' %}

{%  block head %}
<script>
    $(function() {
        $('.pop').on('click', function() {
            $('.imagepreview').attr('src', $(this).find('img').attr('src'));
            $('#imagemodal').modal('show');
        });
    });
</script>
{%  endblock %}
{% block body%}
<div class="container">
    <H2> Report: {{mediafile}} </H2>

<!--    <p>-->
<!--        {{ serverfile.mediafile.name }}-->
<!--    </p>-->
<!--    <p>-->
<!--        {{ serverfile.zipfile.url }}-->
<!--    </p>-->
    <div class="container-fluid">
        {% for im in image_list %}
        <a href="#" class="pop">

            <figure class="figure">
                <img src="{{ im.bitmap_image.url }}" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure." width=400>
                <figcaption class="figure-caption">{{ im.filename }}</figcaption>
            </figure>
        </a>
        {% endfor %}

        <div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <img src="" class="imagepreview" style="width: 100%;" >
                    </div>
                </div>
            </div>
        </div>
    </div>

    <a class="btn btn-secondary" href="{% url 'uploader:model_form_upload' %}">Upload next</a>
    <a class="btn btn-primary" href='{{ serverfile.zip_file.url }}'> Download whole report</a>
</div>
{% endblock %}
